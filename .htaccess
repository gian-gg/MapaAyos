RewriteEngine On

# Set base if your project is in a subfolder like /MapaAyos
RewriteBase /MapaAyos/

# Custom 404 error page
ErrorDocument 404 /MapaAyos/views/404.php

# 1. Redirect access to protected directories to 404
RewriteCond %{REQUEST_URI} ^/MapaAyos/(config|controllers|database|models)/ [NC]
RewriteRule ^.*$ /MapaAyos/views/404.php [L]

# 2. Rewrite root-level views like /signin → /views/signin.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(signin|signup|mapa)$ views/$1.php [NC,L]

# 3. Rewrite nested views like /user/dashboard → /views/user/dashboard.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(admin|official|user)/(.+)$ views/$1/$2.php [NC,L]