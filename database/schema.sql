-- Users table
CREATE TABLE IF NOT EXISTS `users` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `firstName` VARCHAR(100) DEFAULT NULL,
  `lastName` VARCHAR(100) DEFAULT NULL,
  `email` VARCHAR(255) UNIQUE NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `role` ENUM('user', 'official', 'admin') DEFAULT 'user',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Reports table
CREATE TABLE IF NOT EXISTS `reports` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `lat` DOUBLE NOT NULL,
  `lng` DOUBLE NOT NULL,
  `title` VARCHAR(255) NOT NULL,
  `description` TEXT DEFAULT NULL,
  `status` ENUM('verified', 'pending') DEFAULT 'pending',
  `createdBy` INT(11) NOT NULL,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_reports_user` FOREIGN KEY (`createdBy`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Baranggays table
CREATE TABLE `baranggays` (
  `id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `city` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `geojson` text DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Baranggays
INSERT INTO `baranggays` (`id`, `name`, `city`, `country`, `geojson`) VALUES
(1, 'talamban', 'cebu city', 'philippines', '{\"type\":\"Polygon\",\"coordinates\":[[10.353276624490075,123.91854087193826],[10.359764095635565,123.90685316508196],[10.375274218463554,123.91186243827724],[10.374842504543338,123.91471074361255],[10.382620593587957,123.91950402221879],[10.377682742183717,123.92461931155543],[10.376436066080293,123.92463274695794],[10.353275332434187,123.9185420062178]]}'),
(2, 'banilad', 'cebu city', 'philippines', '{\"type\":\"Polygon\",\"coordinates\":[[10.360871392872598,123.8945114975511],[10.359916259504729,123.89400186637083],[10.359382169934443,123.89466638544653],[10.358944740077941,123.89502112869042],[10.358431946980891,123.89521265675788],[10.357727469491676,123.89557073094191],[10.356862434484482,123.89706798067112],[10.356228401630673,123.89754929899031],[10.35450815100044,123.89797399161922],[10.353641468773509,123.89880339135766],[10.35315979557077,123.89952287064578],[10.352653546411572,123.8999575560431],[10.351754092007983,123.90034394307938],[10.350761248629645,123.90113503721057],[10.348790297765415,123.90339506817358],[10.348313532225792,123.90317689275365],[10.347953090453439,123.90320687105596],[10.347659821610018,123.90333511159717],[10.347668013470116,123.90334010800332],[10.346588323053085,123.9043360538418],[10.345892010867937,123.90455256381242],[10.345429986401387,123.90538862539046],[10.34495813092942,123.90604148622343],[10.344781184946498,123.9064811679905],[10.34476807782272,123.90648116803357],[10.34421921694044,123.90710738145938],[10.343934136567372,123.90717066899987],[10.343742444452294,123.90723562200009],[10.343586796925353,123.90753040863939],[10.34314770663758,123.90789514466331],[10.34312313066711,123.90838145938653],[10.342929799661697,123.90876951185518],[10.342833134107643,123.90946734017227],[10.341447045162976,123.91025343790571],[10.341188176803099,123.91062483578565],[10.34075399839781,123.91088131681646],[10.340192023185786,123.91177733499303],[10.339833210488658,123.91253678535496],[10.340051119622027,123.91347444007987],[10.353274934492664,123.91854231732299],[10.359769877872182,123.90685849279149],[10.360871392872598,123.8945114975511]]}'),
(3, 'lahug', 'cebu city', 'philippines', '{\"type\":\"Polygon\",\"coordinates\":[[10.319427515645664,123.90339009589196],[10.321395707874824,123.90234105908817],[10.320851532718128,123.9011598857195],[10.321436678111063,123.90085743198716],[10.321481561376983,123.90085236293034],[10.32157833258993,123.90017479896083],[10.321583319618592,123.89968647979467],[10.32146529327729,123.89896498401416],[10.321818314863215,123.89888503870282],[10.322053600538132,123.89068967426365],[10.3218624010165,123.8907286618402],[10.321801937569218,123.89010800972218],[10.32198929249897,123.89017238273846],[10.322142342924394,123.89017640605617],[10.32231056636447,123.89015830114623],[10.3225045179861,123.89008722260618],[10.323740316859439,123.88951156375612],[10.32407742163814,123.88943310914335],[10.324239047089245,123.8894297563814],[10.324460704714836,123.88939689932168],[10.324638822337146,123.88932246802278],[10.324785934223495,123.88922792015534],[10.325085435338586,123.88891276060133],[10.325260913833704,123.88878937898623],[10.326591999677,123.88831939463229],[10.32675098507504,123.88823222283946],[10.326851257981556,123.88815443877897],[10.326904033184093,123.88798411850735],[10.326970002174363,123.88791572217275],[10.32701947890598,123.88785336081664],[10.327037950217118,123.88779636387825],[10.327016840147921,123.8875375307105],[10.327028054873903,123.88745304112008],[10.327128987381228,123.88712111776121],[10.327145479618324,123.8867402440826],[10.327256307425948,123.88660948638783],[10.327359218926201,123.88657595877545],[10.32748126136761,123.88657931153564],[10.327829576831679,123.88671409253357],[10.327933147834447,123.88673890296546],[10.328014289423061,123.88673353854813],[10.328169975665777,123.88665173117568],[10.333760543230852,123.87988959882401],[10.3338594945505,123.87985003624017],[10.333959105513145,123.87978499267336],[10.334073888969249,123.87965691719567],[10.334155028972155,123.87960729633029],[10.334407684294522,123.87959589694148],[10.335124089670066,123.87978901598545],[10.335332546178217,123.8798963043451],[10.335493506169534,123.87994190189696],[10.335588498914035,123.8799539718367],[10.335670957867917,123.87993519637462],[10.335864241574884,123.8798493656887],[10.336004751498923,123.87984534237518],[10.336156475759873,123.87986612949453],[10.33641506650352,123.87997945282518],[10.337071015582124,123.8805358950996],[10.348341623528608,123.89372424612623],[10.339756713278847,123.90103517111244],[10.337545004559738,123.89840548158497],[10.334753876871797,123.90041661300941],[10.332830656145557,123.9031729826731],[10.329285934720152,123.90915496058238],[10.326096792760431,123.90779203159703],[10.326049294956748,123.90775515122243],[10.3260011374553,123.90769480152011],[10.325960896250526,123.90762171132852],[10.325896246434453,123.90754795057991],[10.325896246433906,123.90751643462256],[10.322686314018483,123.90538783081597],[10.322441565669502,123.90520141729525],[10.320692038408616,123.90402042996786],[10.319427515645664,123.90339009589196]]}');

-- Officials Info table
CREATE TABLE IF NOT EXISTS `officialsInfo` (
  `userID` INT(11) NOT NULL,
  `baranggayID` INT(11) NOT NULL,
  `position` VARCHAR(100) DEFAULT NULL,
  `isActive` TINYINT(1) DEFAULT 1,
  `termStart` DATE DEFAULT NULL,
  `termEnd` DATE DEFAULT NULL,
  PRIMARY KEY (`userID`, `baranggayID`),
  CONSTRAINT `fk_official_user` FOREIGN KEY (`userID`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_official_baranggay` FOREIGN KEY (`baranggayID`) REFERENCES `baranggays` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- User Preferences table
CREATE TABLE user_preferences (
  `user_id` int(11) NOT NULL,
  `theme` varchar(10) DEFAULT 'system',
  `profile_image` varchar(255) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;